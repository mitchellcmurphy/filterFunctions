<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for app/home/home.component.ts</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../prettify.css" />
    <link rel="stylesheet" href="../../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../../index.html">all files</a> / <a href="index.html">app/home/</a> home.component.ts
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">82.76% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>48/58</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">37.5% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>3/8</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">87.5% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>7/8</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">82.46% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>47/57</span>
      </div>
    </div>
  </div>
  <div class='status-line high'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144</td><td class="line-coverage quiet"><span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">50015×</span>
<span class="cline-any cline-yes">50015×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">50015×</span>
<span class="cline-any cline-yes">50015×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">100035×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">100035×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">100020×</span>
<span class="cline-any cline-yes">100020×</span>
<span class="cline-any cline-yes">100020×</span>
<span class="cline-any cline-yes">100020×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">import { Component } from '@angular/core';
import { UUID } from 'angular2-uuid';
&nbsp;
@Component({
  selector: 'home',  // &lt;home&gt;&lt;/home&gt;
  styleUrls: [ './home.component.css' ],
  templateUrl: './home.component.html'
})
export class HomeComponent {
  public emails: string[];
  public filteredEmails: string[];
  public filteredEmailsMap: any;
  public filteredResult: string[];
  public emailNumber: number = 100000;
  public randomPercentage: number = 50;
  public ticksArray: number = 0;
  public ticksMap: number = 0;
  public expectedCount: number = 0;
&nbsp;
  constructor() {
&nbsp;
  }
&nbsp;
  ngOnInit() {
    this.emails = [];
    this.filteredEmails = [];
    this.filteredEmailsMap = new Map();
    this.filteredResult = [];
  }
&nbsp;
  //Generates a list of random emails with a unique percentage
  //Inputs:
  //this.randomPercentage : the percentage set by the user that is used to calculate how many dupes per entry
  //this.emailNumber : the number of emails to generate, set by the user
  //Outputs:
  //this.emails : adds the randomly generated emails to this object
  //this.expectedCount : calculated and set here, used for a check in the html
  //Uses:
  //this.shuffleEmails() : used to shuffle the email list
  generateEmails(){
    //Calculate the percentage
    let percentage = this.randomPercentage / 100;
    //Calculate the number of unique values to create
    let uniques = percentage &gt; 0 ? Math.round(this.emailNumber * percentage) : <span class="branch-1 cbranch-no" title="branch not covered" >1;</span>
    //Calculate the number of dupes to make
    let dupes = this.emailNumber - uniques;
    //Create a loop to add entries into this.emails
    for(let i = 0; i &lt; uniques; i++){
      //Create a new email and push it
      let newEmail = UUID.UUID() + '@email.com';
      this.emails.push(newEmail);
      //Calculate and add that email a certain number of times based on user input
      // for(let j = 0; j &lt; (percentage &gt; 0 ? 1 / percentage : this.emailNumber); j++){
      //   this.emails.push(newEmail);
      // }
    }
    for(let j = 0; j &lt; dupes; j++){
      let dupe = this.emails[Math.floor((Math.random() * this.emails.length))];
      this.emails.push(dupe);
    }
    //Calculate the expected count of unique emails
    this.expectedCount = percentage &gt; 0 ? Math.round(this.emailNumber * percentage) : <span class="branch-1 cbranch-no" title="branch not covered" >1;</span>
    //Shuffle the list so the duplicates are not close to each other
    this.shuffleEmails();
  }
&nbsp;
  //Shuffles an array of strings
  //Inputs:
  //this.emails : shuffles this array so entries are not close to their initial placement
  //Outputs:
  //this.emails : changes the structure of this array
  shuffleEmails() {
    //Loop through our email list
    for (let i = this.emails.length; i; i--) {
        //Generate a random number
        let j = Math.floor(Math.random() * i);
        //Swap the two entires
        [this.emails[i - 1], this.emails[j]] = [this.emails[j], this.emails[i - 1]];
    }
    console.log("Emails after shuffle, before sort", this.emails);
  }
&nbsp;
  //THIS IS AN OLD FUNCTION THAT DIDN'T PERFORM AS WELL AS NEEDED, LEAVING TO SHOW THOUGHT PROCESS AND PROGRESSION
<span class="fstat-no" title="function not covered" >  filterEmailsArray(){</span>
<span class="cstat-no" title="statement not covered" >    let start = new Date();</span>
<span class="cstat-no" title="statement not covered" >    let length = this.emails.length;</span>
<span class="cstat-no" title="statement not covered" >    for(let i = 0; i &lt; length; i++){</span>
<span class="cstat-no" title="statement not covered" >      let email = this.emails[i];</span>
<span class="cstat-no" title="statement not covered" >      if(this.filteredEmails.indexOf(email) &lt; 0){</span>
<span class="cstat-no" title="statement not covered" >        this.filteredEmails.push(email);</span>
      }
    }
<span class="cstat-no" title="statement not covered" >    this.ticksArray = Math.abs(new Date().getTime() - start.getTime());</span>
<span class="cstat-no" title="statement not covered" >    console.log("Emails", this.emails.length);</span>
<span class="cstat-no" title="statement not covered" >    console.log("Filtered", this.filteredEmails.length);</span>
<span class="cstat-no" title="statement not covered" >    console.log("Contents:", this.filteredEmails);</span>
  }
&nbsp;
  //Filters an array of randomly generated emails into a mapping with only unique entries, no duplicates
  //Inputs:
  //this.emails : filters this list down but not by removing any entries
  //Outputs:
  //this.filteredEmailsMap : creates this mapping with only unique entries
  //this.ticksMap : a calulation of how long it took to filter the data
  filterEmailsMap(){
    //Start our timer (essentually)
    let start = new Date();
    let length = this.emails.length;
    //For every entry in our email list, check if that email's key (which is this case is the email itself)
    //is not already in our mapping.
    //If we don't find the entry in the map, add it
    //If it already exists, move on
    for(let i = 0; i &lt; length; i++){
      let email = this.emails[i];
      <span class="missing-if-branch" title="else path not taken" >E</span>if(!(email in this.filteredEmailsMap)){
        this.filteredEmailsMap.set(email, email);
        this.filteredResult.push(email);
      }
    }
    //Calculate how long it took to process the filter
    this.ticksMap = Math.abs(new Date().getTime() - start.getTime());
    // console.log("Emails", this.emails.length);
    // console.log("Filtered", this.filteredEmailsMap.size);
    // console.log("Contents:", this.filteredEmailsMap);
    console.log("Results", this.filteredResult);
  }
&nbsp;
  //Clears all data used to create and filter data
  //Inputs:
  //this.emails : clears this
  //this.filteredEmails : clears this
  //this.filteredEmailsMap : clears this
  //Outputs:
  //this.emails : cleared
  //this.filteredEmails : cleared
  //this.filteredEmailsMap : cleared
  clearAll(){
    this.emails = [];
    this.filteredEmails = [];
    this.filteredEmailsMap.clear();
  }
&nbsp;
}
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Sun Jan 01 2017 10:35:10 GMT-0800 (PST)
</div>
</div>
<script src="../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../sorter.js"></script>
</body>
</html>
